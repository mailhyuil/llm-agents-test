---
alwaysApply: true
---

# LLM Agents 프로젝트 - Cursor Rules

## 프로젝트 개요

- TypeScript 기반 AI Agent 애플리케이션
- Python 코드를 TypeScript로 포팅한 Career Conversation 시스템
- OpenAI GPT-4o-mini와 Vercel AI SDK 사용
- Express.js 기반 웹 서버와 실시간 채팅 인터페이스

## 기술 스택

- **언어**: TypeScript (ES2022, ESNext 모듈)
- **런타임**: Node.js
- **웹 프레임워크**: Express.js
- **AI/ML**: Vercel AI SDK, OpenAI GPT-4o-mini, @openai/agents
- **파일 처리**: pdf-parse, multer
- **유틸리티**: zod (스키마 검증), cors, dotenv

## 코딩 규칙

### TypeScript 설정

- **strict 모드** 필수 사용
- **ES2022 타겟**, **ESNext 모듈** 사용
- **forceConsistentCasingInFileNames** 준수
- 모든 함수와 변수에 명시적 타입 정의
- `any` 타입 사용 금지, `unknown` 사용 권장

### 함수 및 비동기 처리

- 모든 비동기 함수는 **async/await** 패턴 사용
- Promise 체이닝 대신 async/await 선호
- 에러 처리는 **try-catch 블록** 필수
- 함수명은 **camelCase**, 상수는 **UPPER_CASE**

### 파일 구조 및 네이밍

- **src/pushover-app/**: 메인 웹 애플리케이션
- **src/pushover/**: AI 채팅 시스템
- **src/openai-agents-sdk/**: OpenAI Agents 실험
- **helpers/**: 유틸리티 함수들
- 파일명은 **kebab-case** 또는 **camelCase**
- 디렉토리명은 **kebab-case**

### AI 관련 규칙

- 모든 AI 응답은 **한국어**로 제공
- 사용자 경험을 고려한 **자연스러운 대화** 구현
- OpenAI API 키는 **환경 변수**로만 관리
- AI 도구(tools)는 **zod 스키마**로 검증

### 보안 및 데이터 처리

- 업로드된 파일은 **처리 후 즉시 삭제**
- API 키는 **절대 하드코딩 금지**
- 환경 변수는 **.env 파일**로 관리
- 파일 업로드는 **multer**로 처리

### Express.js 패턴

- 미들웨어는 **순서대로** 등록
- CORS는 **모든 요청**에 허용
- 정적 파일은 **public 디렉토리**에서 서빙
- 에러 응답은 **일관된 JSON 형식** 사용

### 코드 스타일

- **2칸 들여쓰기** 사용
- 세미콜론 **필수** 사용
- 문자열은 **작은따옴표** 사용
- 객체와 배열은 **후행 쉼표** 사용
- 주석은 **한국어**로 작성

### 에러 처리

- 모든 API 호출은 **try-catch**로 감싸기
- 에러 로그는 **console.error** 사용
- 사용자에게는 **친화적인 에러 메시지** 제공
- 서버 에러는 **500 상태 코드** 반환

### 파일 업로드

- **PDF와 TXT 파일만** 허용
- 파일 크기 제한 설정
- 업로드 후 **보안상 이유로 즉시 삭제**
- 파일 확장자 **소문자**로 검증

### 환경 변수

- 필수 환경 변수: OPENAI_API_KEY, PUSHOVER_USER, PUSHOVER_TOKEN
- 선택적 환경 변수: PORT (기본값 3000)
- dotenv로 **자동 로드**

### 테스트 및 개발

- 개발 서버: `pnpm dev`
- 프로덕션 빌드: `pnpm build`
- 테스트 모드: `pnpm dev -- --test`
- 모든 변경사항은 **타입 체크** 통과 필수

## 금지사항

- `any` 타입 사용 금지
- API 키 하드코딩 금지
- 업로드 파일 영구 저장 금지
- 영어 주석 사용 금지 (한국어 필수)
- 동기 함수에서 비동기 작업 수행 금지
